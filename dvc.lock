schema: '2.0'
stages:
  data_ingestion:
    cmd: python ./src/pipelines/training_pipeline.py --step ingestion
    deps:
    - path: ./src/pipelines/training_pipeline.py
      hash: md5
      md5: 1187f6fce5c43ceb7cf7b38895d58153
      size: 1769
    - path: params.yaml
      hash: md5
      md5: 20d1c36c0cbfcb547591edb9ab6dc81b
      size: 1020
    - path: src/data/data_ingestion.py
      hash: md5
      md5: d85abc89f45e3584170bb0e67ddcbfcc
      size: 8034
    params:
      params.yaml:
        data_ingestion_params.random_state: 42
        data_ingestion_params.shuffle: true
        data_ingestion_params.test_size: 0.2
    outs:
    - path: data/interim/test
      hash: md5
      md5: 5a5071302e770a3e581ddad199f98def.dir
      size: 8647725
      nfiles: 3
    - path: data/interim/train
      hash: md5
      md5: c509e4acab63abc5c4062438a611e8eb.dir
      size: 34064652
      nfiles: 3
    - path: data/raw
      hash: md5
      md5: 9a2cb922182ac01b7b86b96ddde06cf2.dir
      size: 42675542
      nfiles: 1
  data_preprocessing:
    cmd: python ./src/pipelines/training_pipeline.py --step preprocess
    deps:
    - path: ./src/pipelines/training_pipeline.py
      hash: md5
      md5: 1187f6fce5c43ceb7cf7b38895d58153
      size: 1769
    - path: data/interim/test
      hash: md5
      md5: 5a5071302e770a3e581ddad199f98def.dir
      size: 8647725
      nfiles: 3
    - path: data/interim/train
      hash: md5
      md5: c509e4acab63abc5c4062438a611e8eb.dir
      size: 34064652
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 20d1c36c0cbfcb547591edb9ab6dc81b
      size: 1020
    - path: src/data/data_preprocessing.py
      hash: md5
      md5: 23121bfcde8e985003f50b4eb6d81692
      size: 8280
    params:
      params.yaml:
        data_preprocessing_params.text_column_for_preprocessing: review
    outs:
    - path: data/processed/preprocessed_test_data
      hash: md5
      md5: 54950f65309c876b796b0c40e0ee6f9b.dir
      size: 5363164
      nfiles: 3
    - path: data/processed/preprocessed_training_data
      hash: md5
      md5: 61b4d85c183eb30d5dfee86c8bbf95c4.dir
      size: 21090046
      nfiles: 3
  feature_engineering:
    cmd: python ./src/pipelines/training_pipeline.py --step fe
    deps:
    - path: ./src/pipelines/training_pipeline.py
      hash: md5
      md5: 1187f6fce5c43ceb7cf7b38895d58153
      size: 1769
    - path: data/processed/preprocessed_test_data
      hash: md5
      md5: 54950f65309c876b796b0c40e0ee6f9b.dir
      size: 5363164
      nfiles: 3
    - path: data/processed/preprocessed_training_data
      hash: md5
      md5: 61b4d85c183eb30d5dfee86c8bbf95c4.dir
      size: 21090046
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 20d1c36c0cbfcb547591edb9ab6dc81b
      size: 1020
    - path: src/features/feature_engineering.py
      hash: md5
      md5: b802c466d185c32217f1d38636aac4c8
      size: 11135
    params:
      params.yaml:
        TF-IDF_Params.max_df: 0.9
        TF-IDF_Params.max_features: 5000
        TF-IDF_Params.min_df: 2
        TF-IDF_Params.ngram_range:
        - 1
        - 1
        feature_engineering_params.text_column_for_engineering: review
    outs:
    - path: data/feature_engineered/feature_engineered_test_data
      hash: md5
      md5: df8983101a812a143bce8165b3a5021d.dir
      size: 19114770
      nfiles: 3
    - path: data/feature_engineered/feature_engineered_training_data
      hash: md5
      md5: cb2dca8f908253417293e8fefceb519d.dir
      size: 51918935
      nfiles: 3
    - path: saved_models/vectorizer
      hash: md5
      md5: 761421b91cfe6b8be5b184777a43fd03.dir
      size: 183126
      nfiles: 1
  model_training:
    cmd: python ./src/pipelines/training_pipeline.py --step train
    deps:
    - path: ./src/pipelines/training_pipeline.py
      hash: md5
      md5: 1187f6fce5c43ceb7cf7b38895d58153
      size: 1769
    - path: data/feature_engineered/feature_engineered_training_data
      hash: md5
      md5: cb2dca8f908253417293e8fefceb519d.dir
      size: 51918935
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 20d1c36c0cbfcb547591edb9ab6dc81b
      size: 1020
    - path: src/model/train_model.py
      hash: md5
      md5: 70c30475cf84306359b70148b1f52309
      size: 5915
    params:
      params.yaml:
        Model_Params.C: 0.1
        Model_Params.max_iter: 300
        Model_Params.penalty: l2
        Model_Params.random_state: 42
        Model_Params.solver: saga
        Model_Params.tol: 0.001
        Target_Col: sentiment
    outs:
    - path: saved_models/model
      hash: md5
      md5: 9f4f86f34f0993d53f4e9ba018af43c7.dir
      size: 40762
      nfiles: 1
  model_evaluation:
    cmd: python ./src/pipelines/training_pipeline.py --step evaluate
    deps:
    - path: ./src/pipelines/training_pipeline.py
      hash: md5
      md5: 1187f6fce5c43ceb7cf7b38895d58153
      size: 1769
    - path: data/feature_engineered/feature_engineered_test_data
      hash: md5
      md5: df8983101a812a143bce8165b3a5021d.dir
      size: 19114770
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 20d1c36c0cbfcb547591edb9ab6dc81b
      size: 1020
    - path: src/model/evaluate_model.py
      hash: md5
      md5: 4992d3bc76cddaa807f9a8cee20bc74a
      size: 8181
    params:
      params.yaml:
        Target_Col: sentiment
    outs:
    - path: reports/performance_metrics.json
      hash: md5
      md5: faf4e1d2932efb4ba59b29f798c9d229
      size: 150
  model_registry:
    cmd: python ./src/pipelines/training_pipeline.py --step register
    deps:
    - path: ./src/pipelines/training_pipeline.py
      hash: md5
      md5: 1187f6fce5c43ceb7cf7b38895d58153
      size: 1769
    - path: params.yaml
      hash: md5
      md5: 20d1c36c0cbfcb547591edb9ab6dc81b
      size: 1020
    - path: reports/performance_metrics.json
      hash: md5
      md5: faf4e1d2932efb4ba59b29f798c9d229
      size: 150
    - path: saved_models/model
      hash: md5
      md5: 9f4f86f34f0993d53f4e9ba018af43c7.dir
      size: 40762
      nfiles: 1
    - path: saved_models/vectorizer
      hash: md5
      md5: 761421b91cfe6b8be5b184777a43fd03.dir
      size: 183126
      nfiles: 1
    - path: src/model/register_model.py
      hash: md5
      md5: 640e6ceaab709086ba6fd1a0a51083ea
      size: 10431
